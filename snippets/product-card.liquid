{% liquid
    assign current_variant = product.selected_or_first_available_variant
    assign featured_image = current_variant.image | default: product.featured_image
    assign secondary_image = product.images[1] | default: product.featured_image
  %}
  

  {% style %}
    .relative-container {
        position: relative;
    }

    .product-card__quick-view {
        top: 10px; 
        right: 10px; 
    }
    .product-card__info{
        text-align:center;
        display:flex;
        flex-direction:column;
        justify-content:center;
        align-items:center;
        line-height: 28.8px;
    }
    .product-card__form{
        margin-bottom:0;
    }
    .product-card__title{
        text-decoration:none;
    }
    .product-card__title:hover{
        color:#d03c3f;
    }
    .product-card__list{
        list-style-type:none;
        display:flex;
    }
    .product-card__max-stock{
        color:green;
    }
    .product-card__min-stock{
        color:red;
    }


  {% endstyle %}
  
  <product-card 
    class="product-card"
    data-product-handle="{{ product.handle }}" 
    data-section-id="{{ section_id }}"
  >
    <a href="{{ product.url }}" class="product-card__link position-relative">
      
        {% render 'image' desktopImage:product.featured_image, class: "media media--square custom-border-radius  media--transparent media--hover-effect " %} 
      
       <div class="product-card__quick-view position-absolute">
        {% form 'product', product %}
          <input type="hidden" name="id" value="{{ current_variant.id }}">
          <button type="submit" class="button quick-view-button">Quick View</button>
        {% endform %}
      </div>
    </a>
  
    <div class="product-card__info">
          
        <div class="product-card__form">
            {% form 'product', product %}   
            <input type="hidden" name="id" value="{{ current_variant.id }}">  
                {% unless product.has_only_default_variant %}
                    <div class="product-card__options"> 
                    {% for product_option in product.options_with_values %}
                        <div class="product-card__option">    
                        <ul class = "product-card__list">
                            {% for option_value in product_option.values %}
                            <li>
                                <input 
                                type="radio" 
                                name="option-{{ product_option.name | handleize }}" 
                                value="{{ option_value }}"
                                {% if product_option.selected_value == option_value %}checked{% endif %}
                                >
                                {{ option_value }}
                            </li>
                            {% endfor %}
                        </ul>
                        </div>
                    {% endfor %}
                    </div>
                {% endunless %}          
            {% endform %}
        </div>

        <span>{{ product.vendor }}</span>

        <a href="{{ product.url }}" class="product-card__title h3">{{ product.title }}</a>     
  
        <div class="product-card__prices">
            <span class="product-card__price h3">{{ current_variant.price | money_without_trailing_zeros }}</span>
    
            {% if current_variant.compare_at_price > current_variant.price %}
            <s class="product-card__compareprice">{{ current_variant.compare_at_price | money_without_trailing_zeros }}</s>
            {% endif %}
        </div>
       
      {% if current_variant.inventory_quantity > 10 %}
        <span class = "product-card__max-stock">{{ current_variant.inventory_quantity }}  in stock</span>
      {% else %} 
        <span class = "product-card__min-stock">Only {{ current_variant.inventory_quantity }}  units left</span>
      {% endif %}  
      
      
    </div>
  
    <script>
      {{ product.variants | json }}
    </script>
  </product-card>